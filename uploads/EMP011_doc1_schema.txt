CREATE TABLE time_entries (
 
    time_entries_id SERIAL PRIMARY KEY,   -- Auto-increment PK based on table name
 
    employee_id INTEGER NOT NULL,            -- FK (must match employees table type)
    entry_date DATE NOT NULL,                -- Date
    project VARCHAR(150) NOT NULL,           -- Project name
    task_description TEXT NOT NULL,          -- Task details
    hours NUMERIC(5,2) NOT NULL,             -- Example: 2.50 hours
 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 
    CONSTRAINT fk_time_entries_employee
        FOREIGN KEY (employee_id)
        REFERENCES employees(employee_id)
        ON DELETE CASCADE
);
CREATE TABLE policy_documents (

    policy_documents_id BIGSERIAL PRIMARY KEY,   -- PK based on table name

    employee_id VARCHAR(50) NOT NULL,            -- Foreign key to employees table

    document_title VARCHAR(200) NOT NULL,        -- Title of the document
    category VARCHAR(100) NOT NULL,              -- Category of policy
    uploaded_on DATE NOT NULL,                   -- Uploaded date
    status VARCHAR(50) DEFAULT 'Active',         -- Active / Inactive / Updated

    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT fk_policy_documents_employee
        FOREIGN KEY (employee_id)
        REFERENCES employees(employee_id)        -- Change if actual table name differs
        ON DELETE CASCADE
);
CREATE TABLE onboarding_process (
 
    onboarding_process_id SERIAL PRIMARY KEY,   -- Primary key based on table name
 
    employee_id VARCHAR(50) NOT NULL,              -- Foreign key to employees table
    name VARCHAR(50) NOT NULL,                    -- Employee name
    position VARCHAR(50) NOT NULL,                -- Job role
    department VARCHAR(50) NOT NULL,              -- Department name
    joining_date DATE NOT NULL,                    -- DOJ
    shifts VARCHAR(100),                           -- Shift details
    status VARCHAR(50) DEFAULT 'Pending',          -- Pending / Completed / In-progress

 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 
    CONSTRAINT fk_onboarding_employee
        FOREIGN KEY (employee_id)
        REFERENCES employees(employee_id)          -- change if your employee table name differs
        ON DELETE CASCADE
);CREATE TABLE leave_management (
 
    leave_management_id SERIAL PRIMARY KEY,   -- Primary key based on table name
 
    employee_id VARCHAR(50) NOT NULL,            -- Foreign key (string type, change if needed)
 
    leave_type VARCHAR(100) NOT NULL,            -- Sick Leave, Casual Leave, etc.

    start_date DATE NOT NULL,

    end_date DATE NOT NULL,

    reason TEXT,

    status VARCHAR(50) DEFAULT 'Pending',        -- Pending, Approved, Rejected
 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 
    CONSTRAINT fk_leave_employee

        FOREIGN KEY (employee_id)

        REFERENCES employees(employee_id)        -- FK reference table (change if needed)

        ON DELETE CASCADE

);

 
 CREATE TABLE attendance (
 
    attendance_id SERIAL PRIMARY KEY,     -- PK based on table name
 
    employee_id VARCHAR NOT NULL,            -- FK (must match employees table type)
 
    attendance_date DATE NOT NULL,           -- Date of attendance
    punch_in TIMESTAMP,                      -- Punch in time
    punch_out TIMESTAMP,                     -- Punch out time
 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 
    CONSTRAINT fk_attendance_employee
        FOREIGN KEY (employee_id)
        REFERENCES employees(employee_id)
        ON DELETE CASCADE
);
CREATE TABLE holiday_calendar (
 
    holiday_calendar_id BIGSERIAL PRIMARY KEY,   -- PK based on table name
 
    holiday_date DATE NOT NULL,                  -- Holiday date
    occasion VARCHAR(200) NOT NULL,              -- Festival/Event name
    type VARCHAR(100) NOT NULL,                  -- Optional, Mandatory, National, Restricted
 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

 CREATE TABLE expense_approval (
 
    expense_approval_id SERIAL PRIMARY KEY,   -- PK based on table name
 
    employee_id VARCHAR(50) NOT NULL,            -- Foreign Key to employees table
    employee_name VARCHAR(150) NOT NULL,         -- Added employee name
 
    category VARCHAR(100) NOT NULL,              -- Travel, Food, Office Supplies, etc.
    description TEXT,                            -- Details about expense
    amount NUMERIC(12,2) NOT NULL,               -- Expense amount
 
    expense_date DATE NOT NULL,                  -- When the expense happened
    submitted_date DATE NOT NULL,                -- When employee submitted it
 
    status VARCHAR(50) DEFAULT 'Pending',        -- Pending, Approved, Rejected
 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 
    CONSTRAINT fk_expense_employee
        FOREIGN KEY (employee_id)
        REFERENCES employees(employee_id)
        ON DELETE CASCADE
);
CREATE TABLE educational_qualifications (

    educational_qualifications_id SERIAL PRIMARY KEY,   -- PK based on table name

    employee_id VARCHAR(50) NOT NULL,                      -- Foreign Key to employee_directory

    -- ===== Educational Details =====
    course_name VARCHAR(150) NOT NULL,                     -- Course name (not PK anymore)
    institution_name VARCHAR(200) NOT NULL,
    specialization VARCHAR(150),
    start_year INT,
    end_year INT,
    grade VARCHAR(50),

    -- ===== Skills & Expertise =====
    skill_name VARCHAR(150),
    proficiency_level VARCHAR(50),

    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),

    CONSTRAINT fk_edu_employee
        FOREIGN KEY (employee_id)
        REFERENCES employee_directory(employee_id)
        ON DELETE CASCADE
);
CREATE TABLE employee_expenses (
    expense_id SERIAL PRIMARY KEY,
 
    employee_id VARCHAR(50) NOT NULL,
    employee_name VARCHAR(150) NOT NULL,
    category VARCHAR(100) NOT NULL,
    description TEXT,
    amount NUMERIC(12,2) NOT NULL,
    expense_date DATE NOT NULL,
    status VARCHAR(50) NOT NULL,
 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 
    CONSTRAINT fk_employee_expenses_employee
        FOREIGN KEY (employee_id)
        REFERENCES employee_master(employee_id)
        ON DELETE CASCADE
);
CREATE TABLE access_request (
    request_id SERIAL PRIMARY KEY,
 
    employee_id INT NOT NULL,
    requested_resource VARCHAR(100) NOT NULL,
    justification TEXT NOT NULL,
    status VARCHAR(20) DEFAULT 'Pending',
    approver_id INT,
 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 
    CONSTRAINT fk_access_request_employee
        FOREIGN KEY (employee_id)
        REFERENCES employees(employee_id)
        ON DELETE CASCADE
);
CREATE TABLE payroll_setup (
    payroll_id SERIAL PRIMARY KEY,
 
    employee_id VARCHAR(50) NOT NULL,
    designation VARCHAR(100) NOT NULL,
 
    pay_cycle VARCHAR(20) DEFAULT 'Monthly'
        CHECK (pay_cycle IN ('Monthly', 'Weekly', 'Biweekly')),
 
    basic_salary NUMERIC(12,2) DEFAULT 0,
    hra NUMERIC(12,2) DEFAULT 0,
    allowance NUMERIC(12,2) DEFAULT 0,
    bonus_percentage NUMERIC(5,2) DEFAULT 0,
    is_bonus_taxable BOOLEAN DEFAULT false,
    is_allowance_taxable BOOLEAN DEFAULT false,
    is_hra_taxable BOOLEAN DEFAULT false,
    is_basic_taxable BOOLEAN DEFAULT false,
 
    provident_fund_percentage NUMERIC(5,2) DEFAULT 0,
    professional_tax NUMERIC(12,2) DEFAULT 0,
    income_tax NUMERIC(12,2) DEFAULT 0,
    lop_amount NUMERIC(12,2) DEFAULT 0,
 
    is_pf_locked BOOLEAN DEFAULT false,
    is_pt_locked BOOLEAN DEFAULT false,
    is_income_tax_auto BOOLEAN DEFAULT false,
 
    total_earnings NUMERIC(12,2) DEFAULT 0,
    total_deductions NUMERIC(12,2) DEFAULT 0,
    net_salary NUMERIC(12,2) DEFAULT 0,
 
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
 
    CONSTRAINT fk_payroll_employee
        FOREIGN KEY (employee_id)
        REFERENCES employee(employee_id)
        ON DELETE CASCADE
);
CREATE TABLE payslips (
    payslip_id SERIAL PRIMARY KEY,
 
    employee_id VARCHAR(50) NOT NULL,
    month VARCHAR(20),
    year INT,
 
    basic_salary NUMERIC(12,2),
    allowances NUMERIC(12,2),
    deductions NUMERIC(12,2),
    net_pay NUMERIC(12,2),
 
    annual_ctc NUMERIC(12,2),
    ytd_earnings NUMERIC(12,2),
 
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
 
    CONSTRAINT fk_payslips_employee
        FOREIGN KEY (employee_id)
        REFERENCES employee(employee_id)
        ON DELETE CASCADE
);

